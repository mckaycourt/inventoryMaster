extends layout

block content
    link(rel='stylesheet', href='#{location}/stylesheets/table.css')
    br
    if(sortby)
        div
            | Sort By: #{sortby} #{order}
    #filters
        include filters

    #count= "Count: " + Object.keys(computers).length
    div(style='overflow-x:auto;')
        table#table
            tbody
                tr#myHeader
                    td
                        if(order === 'asc')
                            a(href='#{location}/computerTable?sortby=ICN&order=dsc')
                                div='ICN'
                        else
                            a(href='#{location}/computerTable?sortby=ICN&order=asc')
                                div='ICN'
                    if(showOptions.FirstName)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=firstname&order=dsc')
                                    div= "First Name"
                            else
                                a(href='#{location}/computerTable?sortby=firstname&order=asc')
                                    div= "First Name"
                    if(showOptions.LastName)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=lastname&order=dsc')
                                    div= "Last Name"
                            else
                                a(href='#{location}/computerTable?sortby=lastname&order=asc')
                                    div= "Last Name"
                    if(showOptions.Make)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=Make&order=dsc')
                                    div= "Make"
                            else
                                a(href='#{location}/computerTable?sortby=Make&order=asc')
                                    div= "Make"
                    if(showOptions.Model)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=Model&order=dsc')
                                    div= "Model"
                            else
                                a(href='#{location}/computerTable?sortby=Model&order=asc')
                                    div= "Model"
                    if(showOptions.SerialNumber)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=SerialNumber&order=dsc')
                                    div= "Serial Number"
                            else
                                a(href='#{location}/computerTable?sortby=SerialNumber&order=asc')
                                    div= "Serial Number"
                    if(showOptions.ServiceTag)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=ServiceTag&order=dsc')
                                    div= "Service Tag"
                            else
                                a(href='#{location}/computerTable?sortby=ServiceTag&order=asc')
                                    div= "Service Tag"
                    if(showOptions.ExpressServiceCode)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=ExpressServiceCode&order=dsc')
                                    div= "Express Service Code"
                            else
                                a(href='#{location}/computerTable?sortby=ExpressServiceCode&order=asc')
                                    div= "Express Service Code"
                    if(showOptions.Type)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=Type&order=dsc')
                                    div= "Type"
                            else
                                a(href='#{location}/computerTable?sortby=Type&order=asc')
                                    div= "Type"
                    if(showOptions.DateAcquired)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=dateAcquired&order=dsc')
                                    div= "Date Acquired"
                            else
                                a(href='#{location}/computerTable?sortby=dateAcquired&order=asc')
                                    div= "Date Acquired"
                    if(showOptions.Warranty)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=Warranty&order=dsc')
                                    div= "Warranty"
                            else
                                a(href='#{location}/computerTable?sortby=Warranty&order=asc')
                                    div= "Warranty"
                    if(showOptions.HomeCheckout)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=HomeCheckout&order=dsc')
                                    div= "Home Checkout"
                            else
                                a(href='#{location}/computerTable?sortby=HomeCheckout&order=asc')
                                    div= "Home Checkout"
                    if(showOptions.Touch)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=Touch&order=dsc')
                                    div= "Touch"
                            else
                                a(href='#{location}/computerTable?sortby=Touch&order=asc')
                                    div= "Touch"
                    if(showOptions.ScreenResolution)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=ScreenResolution&order=dsc')
                                    div= "Screen Resolution"
                            else
                                a(href='#{location}/computerTable?sortby=ScreenResolution&order=asc')
                                    div= "Screen Resolution"
                    if(showOptions.Rotation)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=Rotation&order=dsc')
                                    div= "Rotation"
                            else
                                a(href='#{location}/computerTable?sortby=Rotation&order=asc')
                                    div= "Rotation"
                    if(showOptions.Notes)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=Computer.Notes&order=dsc')
                                    div= "Notes"
                            else
                                a(href='#{location}/computerTable?sortby=Computer.Notes&order=asc')
                                    div= "Notes"
                    if(showOptions.History)
                        td
                            if(order === 'asc')
                                a(href='#{location}/computerTable?sortby=History&order=dsc')
                                    div= "History"
                            else
                                a(href='#{location}/computerTable?sortby=History&order=asc')
                                    div= "History"
                    if(showOptions.ProcessorType)
                        td
                            a(href='#{location}/computerTable?sortby=processorType&hardware=true&order=asc')
                                div= "Processor Type"
                    if(showOptions.ProcessorSpeed)
                        td
                            a(href='#{location}/computerTable?sortby=processorSpeed&hardware=true&order=asc')
                                div= "Processor Speed"
                    if(showOptions.Memory)
                        td
                            a(href='#{location}/computerTable?sortby=memory&hardware=true&order=asc')
                                div= "Memory"
                    if(showOptions.HardDrive)
                        td
                            a(href='#{location}/computerTable?sortby=hardDrive&hardware=true&order=asc')
                                div= "Hard Drive"
                    if(showOptions.VCName)
                        td
                            a(href='#{location}/computerTable?sortby=vcName&hardware=true&order=asc')
                                div= "Graphics Card"
                    if(showOptions.Surplus)
                        td
                            div= "Surplus"
                each computer in computers
                    tr
                        td
                            a(href='#{location}/computer?ICN=' + computer.ICN)
                                div= computer.ICN
                                //i(class="material-icons") laptop
                        if(showOptions.FirstName)
                            td
                                a(href='#{location}/computerTable?where=EmployeeID=\'#{computer.EmployeeID}\'')
                                    div= computer.FirstName
                        if(showOptions.LastName)
                            td
                                a(href='#{location}/computerTable?where=EmployeeID=\'#{computer.EmployeeID}\'')
                                    div= computer.LastName
                        if(showOptions.Make)
                            td
                                a(href='#{location}/computerTable?where=Make=\'#{computer.Make}\'')
                                    div= computer.Make
                        if(showOptions.Model)
                            td
                                a(href='#{location}/computerTable?where=Model=\'#{computer.Model}\'')
                                    div= computer.Model
                        if(showOptions.SerialNumber)
                            td= computer.SerialNumber
                        if(showOptions.ServiceTag)
                            td= computer.ServiceTag
                        if(showOptions.ExpressServiceCode)
                            td= computer.ExpressServiceCode
                        if(showOptions.Type)
                            td
                                a(href='#{location}/computerTable?where=Type=\'#{computer.Type}\'')
                                    div= computer.Type
                        if(showOptions.DateAcquired)
                            td
                                a(href='#{location}/computerTable?where=DateAcquired LIKE \'#{computer.DateAcquiredFilter}\'')
                                    div= computer.DateAcquired
                        if(showOptions.Warranty)
                            td= computer.Warranty
                        if(showOptions.HomeCheckout)
                            td
                                a(href='#{location}/computerTable?where=HomeCheckout=\'#{computer.HomeCheckout}\'')
                                    div
                                        if(computer.HomeCheckout === 'on')
                                            i(class="material-icons")= 'home'
                        if(showOptions.Touch)
                            td
                                a(href='#{location}/computerTable?where=Touch=\'#{computer.Touch}\'')
                                    div
                                        if(computer.Touch === 'on')
                                            i(class="material-icons")= 'touch_app'
                        if(showOptions.ScreenResolution)
                            td
                                a(href='#{location}/computerTable?where=ScreenResolution=\'#{computer.ScreenResolution}\'')
                                    div= computer.ScreenResolution
                        if(showOptions.Rotation)
                            td
                                a(href='#{location}/computerTable?where=RotationGroup=\'#{computer.RotationGroup}\'')
                                    div= computer.RotationGroup
                        if(showOptions.Notes)
                            td= computer.Notes
                        if(showOptions.History)
                            td= computer.History
                        if(showOptions.ProcessorType)
                            td
                                a(href='#{location}/computerTable?where=ProcessorType=\'#{computer.ProcessorType}\'')
                                    div= computer.ProcessorType
                        if(showOptions.ProcessorSpeed)
                            td
                                a(href='#{location}/computerTable?where=ProcessorSpeed=\'#{computer.ProcessorSpeed}\'')
                                    div= computer.ProcessorSpeed
                        if(showOptions.Memory)
                            td
                                a(href='#{location}/computerTable?where=Memory=\'#{computer.Memory}\'')
                                    div= computer.Memory
                        if(showOptions.HardDrive)
                            td
                                a(href='#{location}/computerTable?where=HardDrive=\'#{computer.HardDrive}\'')
                                    div= computer.HardDrive
                        if(showOptions.VCName)
                            td
                                a(href='#{location}/computerTable?where=VCName=\'#{computer.VCName}\'')
                                    div= computer.VCName
                        if(showOptions.Surplus)
                            if(computer.Surplussing === 0)
                                td
                                    button.byu-button.navy(onclick='surplus(#{computer.ICN})' id='surplusButton#{computer.ICN}') Surplus
                            else
                                td
                                    button.byu-button.whitenavy(onclick='undo(#{computer.ICN})' id='surplusButton#{computer.ICN}') Undo
    script.
        $("#count").css('margin-left', window.getComputedStyle(document.getElementById('table'), null).getPropertyValue('margin-left'));
        $("#filters").css('margin-left', window.getComputedStyle(document.getElementById('table'), null).getPropertyValue('margin-left'));
        function toggleSidebar() {
            $("#sidebar").slideToggle();
        }
        function getComputerInfo(ICN, EmployeeID) {
            window.location.href = '#{location}/computer?EmployeeID=' + EmployeeID + '&ICN=' + ICN;
        }

        function surplus(ICN) {
            $.ajax({
                type: "GET",
                url: "#{location}/finnaSurplus?table=Computer&ICN=" + ICN,
                data: {format: 'html'}
            }).done(function (data) {
                $("#surplusButton" + ICN).html('Undo');
                $("#surplusButton" + ICN).attr("onclick", "undo(" + ICN + ")");
                $("#surplusButton" + ICN).removeClass("navy");
                $("#surplusButton" + ICN).addClass("whitenavy");
            });
        }

        function undo(ICN) {
            $.ajax({
                type: "GET",
                url: "#{location}/undoFinnaSurplus?table=Computer&ICN=" + ICN,
                data: {format: 'html'}
            }).done(function (data) {
                $("#surplusButton" + ICN).html('Surplus');
                $("#surplusButton" + ICN).attr("onclick", "surplus(" + ICN + ")");
                $("#surplusButton" + ICN).removeClass("whitenavy");
                $("#surplusButton" + ICN).addClass("navy");
            });
        }